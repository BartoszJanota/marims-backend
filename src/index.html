<html>
    <head>
        <script src='socket.io/socket.io.js'></script>
		<script src='/qrcode.js'></script>
        <script>
            var qrLink;
            console.log('Connecting to websocket at url ' + location.href + 'browser');
            var socket = io.connect(location.href + 'browser');

            socket.on('debug', function(data){
                console.log(data);
            });

            socket.on('sessionGenerated', function(sessionData){
                console.log(sessionData.sessionId);
                console.log(sessionData.androidAppUrl);
                console.log(sessionData.browserUrl);
                console.log(sessionData.browserWebsocketUrl);
                qrLink = location.href + sessionData.browserUrl;
                document.getElementById('qrcode-link').setAttribute('href', qrLink);

				new QRCode(document.getElementById("qrcode"), "marims://runAppWith?sessionId=" + sessionData.sessionId);
            });
        </script>
    </head>

    <body>
        <a id="qrcode-link" href="">
            <div id="qrcode"></div>
        </a>
    </body>

</html>