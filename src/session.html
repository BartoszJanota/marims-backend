<html>
    <head>
        <script src='socket.io/socket.io.js'></script>
        <script>
			var imageWidth = 500;
			var imageHeight = 700;
		
            var refresh = function(image) {
                if(image !== null && image !== undefined) {
                    var screen = document.getElementById('screen');
                    screen.onclick = function(event){
						if(event.pageX != 0 && event.pageY != 0) {
							console.log(Math.floor(event.offsetX/event.srcElement.width*imageWidth),
								Math.floor(event.offsetY/event.srcElement.height*imageHeight));
						}
                    };
					screen.ondragstart = function(event){ 
						return false; 
					};
                    screen.src = 'data:image/jpg;base64,' + image;
                }
            };

            console.log('Connecting to websocket at url ' + location.host + '/browser' + location.pathname);
            var socket = io.connect('http://' + location.host + '/browser' + location.pathname);

            socket.on('refresh', function(data){
                console.log('Refreshing');
                if(data !== null && data !== undefined){
                    refresh(data.image);
                }
            });

            socket.on('start', function(){
                console.log('Starting');
            });
        </script>
    </head>

    <body>
        <img id="screen" src="/image" style="height:90%;margin:0px auto;display:block"/>
    </body>
</html>